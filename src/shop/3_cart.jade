// Created by yang on 2017/2/23.
html
  head
    meta(charset='UTF-8')
    |     
    meta(name='viewport', content='width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0')
    |     
    meta(http-equiv='X-UA-Compatible', content='ie=edge')
    |     
    title Document
    |     
    script(type='text/javascript', src='http://lib.yangqiwang.cn/jquery.min.js')
    |     
    script(type='text/javascript', src='../js/calculation.js')
  style.
    @import "../style.css";
    .content-wrap {
    min-height: 100vh;
    }
    .cart-content {
    padding-top: 45px;
    display: flex;
    flex-direction: column;
    font-size: 16px;
    color: #202020;
    padding-bottom: 90px;
    }
    .cart-content .title {
    font-size: 20px;
    padding-left: 20px;
    display: flex;
    justify-content: space-between;
    }
    .cart-content .title span:nth-of-type(1) {
    color: #fd5111;
    }
    .cart-content .title i {
    color: #fd5111;
    padding-left: 5px;
    font-style: normal;
    }
    .cart-content .thead{
    display: flex;
    justify-content: space-between;
    padding-top: 35px;
    padding-left: 20px;
    }
    .thead,.tfoot {
    font-size: 18px;
    }
    .thead-left span label {
    cursor: pointer;
    }
    .thead-left span:nth-of-type(2) {
    padding-left: 70px;
    }
    .thead-right span {
    padding-left: 70px;
    }
    .thead-right span:nth-of-type(4) {
    padding-left: 100px;
    padding-right: 90px;
    }
    .tbody {
    }
    .tbody-item {
    padding: 20px;
    background: #fcfcfc;
    width: 100%;
    display: flex;
    justify-content: space-between;
    margin-top: 60px;
    border: 1px solid #ececec;
    box-sizing: border-box;
    }
    .tbody-item:nth-last-of-type(1){
    margin-bottom: 60px;
    }
    .tbody-item-left {
    display: flex;
    align-items: flex-start;
    justify-content: flex-start;
    flex-wrap: nowrap;
    }
    .tbody-item-right {
    display: flex;
    align-items: flex-start;
    justify-content: flex-end;
    flex-wrap: nowrap;
    }
    .tbody-item-right *,.tbody-item-left * {
    display: inline-block;
    }
    .tbody-item .tbody-item-left img {
    margin-left: 20px;
    width: 80px;
    height: 80px;
    }
    .tbody-item .tbody-item-left h6 {
    font-weight: normal;
    line-height: 24px;
    margin-left: 10px;
    max-height: 45px;
    display: -webkit-box;
    width: 200px;
    overflow: hidden;
    text-overflow: ellipsis;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    }
    .tbody-item .tbody-item-left .canshu {
    line-height: 24px;
    margin-left: 75px;
    max-height: 45px;
    /*width: 200px;*/
    }
    .tbody-item .tbody-item-left .canshu span {
    display: block;
    }
    .tbody-item .tbody-item-right .caozuo span {
    display: block;
    padding-right: 26px;
    line-height: 24px;
    width: 80px;
    text-align: left;
    cursor: pointer;
    }
    .tbody-item .tbody-item-right .total {
    width: 80px;
    text-align: center;
    padding-right: 90px;
    color: #fd5111;
    }
    .tbody-item .tbody-item-right .tb-stock {
    padding-right: 33px;
    padding-left: 50px;
    }
    .tbody-item .tbody-item-right .price {
    width: 60px;
    text-align: center;
    }
    .tb-stock {
    position: relative;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    height: 26px;
    }
    .tb-stock a, .tb-stock a:hover {
    display: block;
    width: 26px;
    height: 100%;
    border: 1px solid #ccc;
    line-height: 26px;
    padding: 0;
    vertical-align: top;
    overflow: hidden;
    text-align: center;
    background-color: #ededed;
    box-sizing: border-box;
    }
    .tb-stock input {
    margin: 0;
    padding: 0;
    width: 40px;
    height: 100%;
    font-size: 16px;
    line-height: 26px;
    text-align: center;
    color: #666;
    border-top: 1px solid #CCC;
    border-bottom: 1px solid #CCC;
    outline: 0;
    background: #FFF;
    box-sizing: border-box;
    -webkit-appearance: none;
    }
    .tfoot {
    height: 40px;
    width: 100%;
    background: #d2d2d2;
    display: flex;
    justify-content: space-between;
    border: 1px solid #c8c8c8;
    }
    .tfoot-left {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    justify-content: flex-start;
    padding-left: 15px;
    }
    .tfoot-left label {
    padding-left: 5px;
    cursor: pointer;
    }
    .tfoot-left .tfoot-del {
    padding-left: 70px;
    }
    .tfoot-right {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: center;
    justify-content: flex-end;
    }
    .tfoot-right > span {
    padding-right: 60px;
    }
    .tfoot-right .tfoot-tol {
    padding-right: 20px;
    font-size: 22px;
    color: #ff4337;
    line-height: 40px;
    }
    .tfoot-right .tfoot-tol span span:nth-of-type(1) {
    color: #202020;
    font-size: 18px;
    }
    .tfoot-right .tfoot-cash {
    position: relative;
    height: 100%;
    padding: 0 25px;
    font-size: 20px;
    color: #fff;
    line-height: 40px;
    background: #ff4337;
    right: -1px;
    }
    .tfoot-right .tfoot-cash::before {
    position: absolute;
    height: 1px;
    width: 100%;
    content: '';
    display: block;
    left: 0;
    top: -1px;
    background: #ff4337;
    }
    .tfoot-right .tfoot-cash::after {
    position: absolute;
    height: 1px;
    width: 100%;
    content: '';
    display: block;
    left: 0;
    bottom: -1px;
    background: #ff4337;
    }
    .tfoot-right .all-goods {
    padding: 0 4px;
    font-size: 22px;
    color: #ff4337;
    }
    .content-wrap .maylike {
    overflow: hidden;
    padding-bottom: 100px;
    }
    .content-wrap .maylike h6 {
    height: 40px;
    font-size: 18px;
    font-weight: normal;
    text-align: center;
    position: relative;
    width: 160px;
    left: 0;
    right: 0;
    margin: 0 auto 40px auto;
    line-height: 1;
    z-index: 2;
    }
    .content-wrap .maylike h6:before {
    position: absolute;
    content: '';
    display: block;
    top: 50%;
    height: 1px;
    background: #c8c8c8;
    width: 99999px;
    left: 0;
    transform: translate3d(-50%,-50%,0);
    z-index: 0;
    }
    .content-wrap .maylike h6:after {
    line-height: 40px;
    position: absolute;
    content: '猜你喜欢';
    display: block;
    top: 0;
    height: 100%;
    background: #f3f3f3;
    width: 100%;
    left: 0;
    z-index: 1;
    }
  body
    header
      .header-wrap
        .title
          h1 &#x98CE;&#x4FE1;&#x5B50;
          |             
          h4 &#x5927;&#x5B66;&#x751F;&#x7EFC;&#x5408;&#x670D;&#x52A1;&#x5E73;&#x53F0;
        |         
        nav
          ul
            li
              a.cur(href='#') &#x5546;&#x57CE;
            |                 
            li
              a(href='#') &#x5B66;&#x5E93;
            |                 
            li
              a(href='#') &#x793E;&#x533A;
        |         
        .user
          img.user-avatar(src='http://himg.bdimg.com/sys/portrait/item/58a3793632343139303533376506.jpg')
          |             
          span.user-name &#x7528;&#x6237;&#x540D;
          |             
          a.user-join
            object
              a(href='#') &#x767B;&#x9646;
            |                 /
            |                 
            object
              a(href='#') &#x6CE8;&#x518C;
    main
      .site-nav-wrap
        .site-nav
          span.site-nav-title &#x8D2D;&#x7269;&#x8F66;
          // <nav class="site-nav-list">
          // <ul>
          // <li><a href="#">我的账号</a></li>
          // <li><a href="#">购物车</a></li>
          // <li><a href="#">收藏夹</a></li>
          // </ul>
          // </nav>
          .search
            input.search-input(type='text', placeholder='输入商品/店铺')
            |                 
            button.search-btn &#x641C;&#x7D22;
      |     
      .content-wrap
        .cart-content
          .title
            span
              | &#x5168;&#x90E8;&#x5546;&#x54C1;
              i.all-goods 18
            |                 
            span
              | &#x5DF2;&#x9009;&#x5546;&#x54C1;(&#x4E0D;&#x542B;&#x914D;&#x9001;&#x8D39;)
              i
                | &#xFFE5;
                span.susum 0.00
          |             
          .thead
            .thead-left
              span
                input#all(type='checkbox')
                |                         
                label(for='all') &#x5168;&#x9009;
              |                     
              span &#x5546;&#x54C1;&#x4FE1;&#x606F;
            |                 
            .thead-right
              span &#x5355;&#x4EF7;(&#x5143;)
              |                     
              span &#x6570;&#x91CF;
              |                     
              span &#x91D1;&#x989D;(&#x5143;)
              |                     
              span &#x64CD;&#x4F5C;
          |             
          .tbody
            .tbody-item
              .tbody-item-left
                input.Each(type='checkbox')
                |                         
                img(src='https://img.alicdn.com/imgextra/i2/520557274/TB2bIlWsXXXXXa1XXXXXXXXXXXX-520557274.jpg')
                |                         
                h6 &#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;
                |                         
                .canshu
                  span &#x5546;&#x54C1;&#x53C2;&#x6570;
                  span &#x5546;&#x54C1;&#x53C2;&#x6570;
              |                     
              .tbody-item-right
                span.price 79.00
                |                         
                span.tb-stock
                  a.reduc(href='javascript:void(0);') -
                  |                             
                  input.number-input(type='number', pattern='[0-9]*', value='1', maxlength='8')
                  |                             
                  a.add(href='javascript:void(0);') +
                |                         
                span.total 79.00
                |                         
                .caozuo
                  span &#x79FB;&#x5165;&#x6536;&#x85CF;&#x5939;
                  span.del &#x5220;&#x9664;
            |                 
            .tbody-item
              .tbody-item-left
                input.Each(type='checkbox')
                |                         
                img(src='https://img.alicdn.com/imgextra/i2/520557274/TB2bIlWsXXXXXa1XXXXXXXXXXXX-520557274.jpg')
                |                         
                h6 &#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;
                |                         
                .canshu
                  span &#x5546;&#x54C1;&#x53C2;&#x6570;
                  span &#x5546;&#x54C1;&#x53C2;&#x6570;
              |                     
              .tbody-item-right
                span.price 79.00
                |                         
                span.tb-stock
                  a.reduc(href='javascript:void(0);') -
                  |                             
                  input.number-input(type='number', pattern='[0-9]*', value='1', maxlength='8')
                  |                             
                  a.add(href='javascript:void(0);') +
                |                         
                span.total 79.00
                |                         
                .caozuo
                  span &#x79FB;&#x5165;&#x6536;&#x85CF;&#x5939;
                  span.del &#x5220;&#x9664;
            |                 
            .tbody-item
              .tbody-item-left
                input.Each(type='checkbox')
                |                         
                img(src='https://img.alicdn.com/imgextra/i2/520557274/TB2bIlWsXXXXXa1XXXXXXXXXXXX-520557274.jpg')
                |                         
                h6 &#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;&#x5546;&#x54C1;&#x540D;&#x79F0;
                |                         
                .canshu
                  span &#x5546;&#x54C1;&#x53C2;&#x6570;
                  span &#x5546;&#x54C1;&#x53C2;&#x6570;
              |                     
              .tbody-item-right
                span.price 79.00
                |                         
                span.tb-stock
                  a.reduc(href='javascript:void(0);') -
                  |                             
                  input.number-input(type='number', pattern='[0-9]*', value='1', maxlength='8')
                  |                             
                  a.add(href='javascript:void(0);') +
                |                         
                span.total 79.00
                |                         
                .caozuo
                  span &#x79FB;&#x5165;&#x6536;&#x85CF;&#x5939;
                  span.del &#x5220;&#x9664;
          |             
          .tfoot
            .tfoot-left
              input#all2(type='checkbox')
              |                     
              label(for='all2') &#x5168;&#x9009;
              |                     
              .tfoot-del &#x5220;&#x9664;
            |                 
            .tfoot-right
              span
                | &#x5DF2;&#x9009;&#x5546;&#x54C1;
                span.all-goods 18
                | &#x4EF6;
              |                     
              .tfoot-tol
                span
                  span
                    | &#x5408;&#x8BA1;
                    small (&#x4E0D;&#x542B;&#x8FD0;&#x8D39;)
                    | &#xFF1A;
                | &#xFFE5;
                span.susum 0.00
              |                     
              .tfoot-cash &#x7ED3;&#x7B97;
        |         
        .maylike
          h6 &#x731C;&#x4F60;&#x559C;&#x6B22;
          |             
          .goods
            .good-item
              .good-item-img
                img(src='https://img.alicdn.com/imgextra/i4/1876943437/TB2csfdgHBmpuFjSZFuXXaG_XXa_!!1876943437.jpg')
              |                     
              .good-item-info
                span &#xFFE5;555
                |                         
                span &#x9500;&#x91CF;&#xFF1A;100
            |                 
            .good-item
              .good-item-img
                img(src='https://img.alicdn.com/imgextra/i4/1876943437/TB2csfdgHBmpuFjSZFuXXaG_XXa_!!1876943437.jpg')
              |                     
              .good-item-info
                span &#xFFE5;555
                |                         
                span &#x9500;&#x91CF;&#xFF1A;100
            |                 
            .good-item
              .good-item-img
                img(src='https://img.alicdn.com/imgextra/i4/1876943437/TB2csfdgHBmpuFjSZFuXXaG_XXa_!!1876943437.jpg')
              |                     
              .good-item-info
                span &#xFFE5;555
                |                         
                span &#x9500;&#x91CF;&#xFF1A;100
            |                 
            .good-item
              .good-item-img
                img(src='https://img.alicdn.com/imgextra/i4/1876943437/TB2csfdgHBmpuFjSZFuXXaG_XXa_!!1876943437.jpg')
              |                     
              .good-item-info
                span &#xFFE5;555
                |                         
                span &#x9500;&#x91CF;&#xFF1A;100
    footer
      .footer-warp
    script(type='text/javascript').
      $(function() {
      totl();
      adddel()
      //全选
      $("#all,#all2").click(function() {
      all = $(this).prop("checked")
      console.log('check all',all)
      $(".Each").each(function() {
      console.log('check each')
      $(this).prop("checked", all);
      if(all){
      $(this).parent().parent().attr('data-check',all)
      }
      else if(!all){
      $(this).parent().parent().removeAttr('data-check')
      }
      })
      totl()
      })
      //删除当前行
      $(".del").each(function() {
      $(this).click(function() {
      $(this).closest('.tbody-item').remove();
      if($(".tbody-item").length == 0) {
      $(".susum").text(0);
      }
      totl();
      })
      })
      //全选删除
      $(".tfoot-del").click(function() {
      $('[data-check]').remove()
      totl()
      })
      })
      //合计
      function totl() {
      var sum = 0;
      $('[data-check]').find('.total').each(function() {
      console.log('totl')
      sum += parseFloat($(this).text());
      })
      $(".susum").text(sum);
      //总商品
      $('.all-goods').text(
      $('.tbody-item').length
      )
      console.warn($('[data-check]'),sum)
      }
      function adddel(){
      //小计和加减
      $("input[type=checkbox]").bind('click',function () {
      var x = $(this).prop("checked");
      console.warn(x)
      if(x){
      $(this).parent().parent().attr('data-check',x)
      }
      else if(!x){
      $(this).parent().parent().removeAttr('data-check')
      $('#all,#all2').prop('checked',false)
      }
      totl();
      })
      $(".number-input").bind('input propertychange',function () {
      console.log(88)
      var $multi = 0;
      var vall = $(this).val();
      $multi = parseFloat(vall) * parseFloat($(this).parent().prev().text());
      $(this).parent().next().text(Math.round($multi));
      totl();
      })
      //加
      $(".add").each(function() {
      $(this).click(function() {
      var $multi = 0;
      var vall = $(this).prev().val();
      vall++;
      $(this).prev().val(vall);
      $multi = parseFloat(vall) * parseFloat($(this).parent().prev().text());
      $(this).parent().next().text(Math.round($multi));
      totl();
      })
      })
      //减
      $(".reduc").each(function() {
      $(this).click(function() {
      var $multi1 = 0;
      var vall1 = $(this).next().val();
      vall1--;
      if(vall1 <= 0) {
      vall1 = 1;
      }
      $(this).next().val(vall1);
      $multi1 = parseFloat(vall1) * parseFloat($(this).parent().prev().text());
      $(this).parent().next().text(Math.round($multi1));
      totl();
      })
      })
      }
